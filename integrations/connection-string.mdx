---
title: "Connection String"
description: "Connect any PostgreSQL database to dba.ai using standard connection strings for maximum flexibility."
icon: "database"
---

The connection string method allows you to connect virtually any PostgreSQL database to dba.ai, including:

- Self-hosted PostgreSQL servers
- Cloud databases without dedicated integrations
- PostgreSQL-compatible databases (like CockroachDB, YugabyteDB)
- Development and testing databases

## Connection String Format

PostgreSQL connection strings follow this format:

```
postgresql://[username]:[password]@[host]:[port]/[database]?[parameters]
```

Example:

```
postgresql://dbuser:dbpass@localhost:5432/mydb?sslmode=require
```

## Prerequisites

Before connecting your database, ensure:

- Your database is accessible from the internet or through a secure tunnel
- You have valid database credentials with appropriate permissions
- The PostgreSQL port (typically 5432) is open in your firewall/security group
- SSL/TLS is properly configured if required

## Setup Instructions

### 1. Create a Database User for dba.ai

For security, create a dedicated user for dba.ai with appropriate permissions:

```sql
-- Create a dedicated user with a strong password
CREATE USER dba_ai_user WITH PASSWORD 'strong-unique-password';

-- Grant minimum necessary permissions
GRANT CONNECT ON DATABASE your_database TO dba_ai_user;
GRANT USAGE ON SCHEMA public TO dba_ai_user;
GRANT SELECT ON ALL TABLES IN SCHEMA public TO dba_ai_user;
GRANT SELECT ON ALL SEQUENCES IN SCHEMA public TO dba_ai_user;

-- For monitoring statistics
GRANT pg_monitor TO dba_ai_user;

-- For future tables
ALTER DEFAULT PRIVILEGES IN SCHEMA public
GRANT SELECT ON TABLES TO dba_ai_user;
```

### 2. Configure Connection Parameters

Common connection parameters include:

| Parameter            | Description                        | Recommended Value         |
| -------------------- | ---------------------------------- | ------------------------- |
| sslmode              | SSL connection requirement         | require (or verify-full)  |
| connect_timeout      | Connection timeout in seconds      | 10                        |
| application_name     | Identifies the application in logs | dba_ai_monitor            |
| target_session_attrs | Session characteristics            | read-only (if applicable) |

### 3. Build Your Connection String

Combine your database details and parameters into a connection string:

```
postgresql://dba_ai_user:your-password@db.example.com:5432/your_database?sslmode=require&application_name=dba_ai_monitor
```

### 4. Add the Connection in dba.ai

1. Log in to your dba.ai account
2. Navigate to **Connections** > **Add Connection**
3. Select **Connection String** as the connection type
4. Paste your connection string into the field
5. Give your connection a descriptive name
6. Click **Test Connection** to verify
7. Click **Create Connection** to save

## Troubleshooting

### Connection Errors

If you experience connection issues:

- **Connection refused**: Check that your database is accessible and the port is open
- **Authentication failed**: Verify username and password are correct
- **SSL required**: Ensure SSL parameters match your database configuration
- **Timeout**: Check network connectivity and firewall rules

### Viewing Connection Details

To check your current PostgreSQL server connections:

```sql
SELECT * FROM pg_stat_activity
WHERE application_name = 'dba_ai_monitor';
```

### Common SSL/TLS Issues

If you're having SSL/TLS issues:

- **Certificate validation**: Use `sslmode=verify-ca` or `verify-full` with proper CA certificates
- **SSL not available**: Ensure PostgreSQL was compiled with SSL support
- **Certificate mismatch**: Verify the hostname matches the certificate

## Advanced Configuration

### Connection Pooling

For high-traffic databases, consider using connection pooling:

```
postgresql://dba_ai_user:password@pgbouncer.example.com:6432/your_database?pool=true
```

### Read-Only Connections

To ensure dba.ai never modifies data, use the read-only parameter:

```
postgresql://dba_ai_user:password@db.example.com:5432/your_database?target_session_attrs=read-only
```

### Multiple Schemas

If your database uses multiple schemas, grant permissions appropriately:

```sql
GRANT USAGE ON SCHEMA schema1, schema2 TO dba_ai_user;
GRANT SELECT ON ALL TABLES IN SCHEMA schema1, schema2 TO dba_ai_user;
```

## Security Best Practices

- Rotate the dba.ai user password regularly
- Use SSL/TLS with certificate validation
- Grant only the minimum required permissions
- Consider IP-based restrictions for additional security
- Monitor all connections from dba.ai in your database logs

## Next Steps

After connecting your database:

- Set up [issue detection](/solving/issue-detection) to monitor for problems
- Configure [alert settings](/alerts) to get notified about critical issues
- Explore your [dashboard](/dashboard) to see your database performance
